image:
  repository: docker.io/cilium/cilium
  tag: v1.10.0-rc0

# autoDirectNodeRoutes enables installation of PodCIDR routes between worker
# nodes if worker nodes share a common L2 network segment.
autoDirectNodeRoutes: true

# externalIPs is the configuration for ExternalIPs service handling
externalIPs:
  # enabled enables ExternalIPs functionality
  enabled: true

# endpointRoutes enables use of per endpoint routes instead of routing vis
# the cilium_host interface
endpointRoutes:
  enabled: false

# hostServices is the configuration for ClusterIP service handling in host namespace
hostServices:
  # enabled enables host reachable functionality
  enabled: true

# nodePort is the configuration for NodePort service handling
nodePort:
  # enabled enables NodePort functionality
  enabled: true

# masquerade enables masquerading of traffic leaving the node for
# destinations outside of the cluster.
masquerade: true

hubble:
  enabled: true
  # Enables the provided list of Hubble metrics.
  metrics:
    enabled:
      - dns:query;ignoreAAAA
      - drop
      - tcp
      - flow
      - port-distribution
      - icmp
      - http
  listenAddress: ':4244'
  relay:
    enabled: true
    image:
      repository: docker.io/cilium/hubble-relay
      tag: v1.10.0-rc0
  ui:
    enabled: true
    frontend:
      image:
        repository: docker.io/raspbernetes/hubble-ui
        tag: v0.7.5
    backend:
      image:
        repository: docker.io/raspbernetes/hubble-ui-backend
        tag: v0.7.5
    proxy:
      image:
        repository: docker.io/envoyproxy/envoy
        tag: v1.18.2

ipam:
  operator:
    # default: "10.0.0.0/8", however, can use existing podCIDR
    clusterPoolIPv4PodCIDR: '10.0.0.0/8'
    clusterPoolIPv4MaskSize: 24

# kubeProxyReplacement enables kube-proxy replacement in Cilium BPF datapath
# TODO: Disabled due to RockPi kernel <= 4.4
kubeProxyReplacement: strict

# kubeProxyReplacement healthz server bind address
# To enable set the value to '0.0.0.0:10256' for all ipv4
# addresses and this '[::]:10256' for all ipv6 addresses.
# By default it is disabled.
# TODO: Can't be used as RockPi Kernel is <=4.4
kubeProxyReplacementHealthzBindAddr: '0.0.0.0:10256'

# prometheus enables serving metrics on the configured port at /metrics
# Enables metrics for cilium-agent.
prometheus:
  enabled: true
  port: 9090
  # This requires the prometheus CRDs to be available (see https://github.com/prometheus-operator/prometheus-operator/blob/master/example/prometheus-operator-crd/monitoring.coreos.com_servicemonitors.yaml)
  serviceMonitor:
    enabled: false

operator:
  rollOutPods: true
  image:
    repository: cilium/operator
    tag: v1.10.0-rc0
  # Enables metrics for cilium-operator.
  prometheus:
    enabled: true
    serviceMonitor:
      enabled: false

# kubeConfigPath: ~/.kube/config
k8sServiceHost: 192.168.1.205
k8sServicePort: 8443

# nativeRoutingCIDR allows to explicitly specify the CIDR for native routing. This
# value corresponds to the configured cluster-cidr.
nativeRoutingCIDR: 192.168.1.0/24

# tunnel is the encapsulation configuration for communication between nodes
tunnel: disabled

# loadBalancer is the general configuration for service load balancing
loadBalancer:
  # algorithm is the name of the load balancing algorithm for backend
  # selection e.g. random or maglev
  algorithm: maglev
  # mode is the operation mode of load balancing for remote backends
  # e.g. snat, dsr, hybrid
  mode: dsr

# disableEnvoyVersionCheck removes the check for Envoy, which can be useful on
# AArch64 as the images do not currently ship a version of Envoy.
disableEnvoyVersionCheck: false
